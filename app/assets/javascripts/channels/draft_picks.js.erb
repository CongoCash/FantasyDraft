App.draft_picks = App.cable.subscriptions.create({channel:'DraftPicksChannel', id: window.location.pathname.split('/')[2]}, {  
  received: function(data) {
  	$(`#player_team_player_id_${data.player.id}`).parent().remove();
  	if ($('.picks').children().length >= 10)
  		$('.picks').children()[0].remove();
  	$('.next-picks').children()[0].remove();
  	$('#next-pick').html("Next pick: "+data.next_team.name);
  	if (data.draft.order.length >= data.draft.next_pick_index+10) 
	  	$('.next-picks').append(`<div class="col m3 l2 xl1">
	      <div class = "card">
	      <div class = "card-content">
	      <p><strong>Pick ${data.draft.next_pick_index + 10}</strong></p><p>${data.last_team.name}</p></div>
	      </div>
	      </div>`
	  		);
    return $('.picks').append(this.renderDraftPick(data));
  },

  renderDraftPick: function(data) {
    return `<div class='col m3 l2 xl1'>
    <div class='card small'>
    <div class='card-content'>
    <span class = 'card-action'>
    	<p><b>Pick ${data.draft.next_pick_index}</b></p>
      <p>${data.team.name}</p></span>
      <div class='card-title'>
      <p>${data.player.name}</p>
       <p>${data.player.position}</p>
       <br>
       <image src='/assets/${data.player.nfl_team}.png', width='64'>
       </div>
       </div>
    </div>
    </div>`;
  }
});