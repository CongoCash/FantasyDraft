<div class="container">

  <div class="row">
    <div class="col s12 center-align">
      <h2><%= @league.name %></h2>
      <p>Maximum Number of Teams: <%= @league.number_of_teams %></p>
      <p><strong>Commissioner: </strong>
        <%= link_to @league.user.name, user_path(@league.user.id) %></p>
    </div>
  </div>

  <div class="row">
    <div class="col s12 center-align">
      <% if @league.draft.nil? && @league.user == current_user && @league.teams.length > 0%>
        <%= button_to "Create Draft", create_draft_path(@league.id),
        class: 'btn blue'%>

      <% elsif @league.draft.nil? && @league.teams.length == 0%>
        <h1>A league must have 1 team before a draft can be created.</h1>

      <% elsif @league.draft.nil?%>
        <p>Draft has not be created yet</p>

      <% elsif @league.draft.next_pick_index <= @league.draft.order.length%>
        <%= link_to "View Draft", draft_path(@league.id), class: "btn red" %>
      <% end %>

      <% if @league.teams.length < @league.number_of_teams && @league.draft.nil? &&
        @user_in_league == false %>

        <%= link_to 'Join league', new_league_team_path(@league.id),
                    class:'btn green' %>
      <% end %>
    </div>
  </div>


  <div class="row">
    <% @league.teams.each do |team| %>
      <div class="col s4 center-align">
        <%= link_to team.name, league_team_path(team.league.id, team.id)%>
        <h1><%=team.id%></h1>
        <% if current_user == @league.user %>
          <%= button_to 'Remove from league', team_destroy_path(team.league_id), method: :delete,
            params: {:team_id => team.id}, class: 'btn red'%>
        <% end %>
        <% if current_user != @league.user && current_user == team.user %>
          <%= button_to 'Leave League', team_destroy_path(team.league_id), method: :delete,
            params: {:team_id => team.id}, class: 'btn red'%>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
